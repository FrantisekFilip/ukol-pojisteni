<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Uživatel</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
<div class="btn-group d-flex flex-column flex-sm-row" role="group" aria-label="Výběr kandidáta">
    <a href="/" class="btn btn-secondary">Domů</a>
    <a href="/users/get-all" class="btn btn-secondary">Uživatelé</a>
    <a href="/users/create-user" class="btn btn-secondary">Nový uživatel</a>
    <a href="/insurances/get-all" class="btn btn-secondary">Pojištění</a>
    <a href="/insurances/create-insurance" class="btn btn-secondary">Nové pojištění</a>
</div>
    <h1>Uživatel</h1>
    <form id="userForm" action="../update-user" method="post">
        <input type="hidden" id="userId" name="id" th:value="${userDTO.id}">
        <div>
            <label for="firstName">Jméno</label>
            <input  type="text" class="form-control" id="firstName" th:field="${userDTO.firstName}">
        </div>
        <div>
            <label for="lastName">Příjmení</label>
            <input  type="text" class="form-control" id="lastName" th:field="${userDTO.lastName}">
        </div>
        <input type="hidden" id="addressId" name="addressDTO.id" th:value="${userDTO.addressDTO.id}">
        <div>
            <label for="street">Ulice</label>
            <input  type="text" class="form-control" id="street" th:field="${userDTO.addressDTO.street}">
        </div>
        <div>
            <label for="city">Město</label>
            <input  type="text" class="form-control" id="city" th:field="${userDTO.addressDTO.city}">
        </div>
        <div>
            <label for="postcode">PSČ</label>
            <input  type="text" class="form-control" id="postcode" th:field="${userDTO.addressDTO.postcode}">
        </div>
        <div>
            <label>Pojištění</label>
            <ul>
                <li th:each="insuranceDTO : ${userDTO.insuranceDTOS}">
                    <span th:text="${insuranceDTO.type}"></span>
                    <span th:text="${insuranceDTO.amount}"></span>
                    <button type="button" th:onclick="'removeInsurance(' + ${userDTO.id} + ',' + ${insuranceDTO.id} + ')'" class="btn btn-link">Odstranit</button>
                </li>
            </ul>
        </div>

        <div class="accordion" id="insuranceAccordion">
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingOne">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                        Přidat pojištění
                    </button>
                </h2>
                <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#insuranceAccordion">
                    <div class="accordion-body">
                        <div th:each="insurance : ${insuranceDTOS}">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" th:value="${insurance.id}" th:id="'insurance' + ${insurance.id}" name="insurances">
                                <label class="form-check-label" th:for="'insurance' + ${insurance.id}">
                                    <span th:text="${insurance.type}"></span> - <span th:text="${insurance.description}"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <button type="submit" class="btn btn-primary">Uložit</button>
    </form>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="/user.js?v=1.0.0"></script>
</body>
</html>